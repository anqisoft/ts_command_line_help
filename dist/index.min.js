import{COMMAND_LINE_ARGS,exitProcess,I18nFlag}from"https://raw.githubusercontent.com/anqisoft/ts_utils/main/index.ts";import{isSyncFunc}from"https://raw.githubusercontent.com/anqisoft/ts_utils/main/index.ts";async function done(n,e,s,t,o){const c=COMMAND_LINE_ARGS;const i=c.length-1;let l=false;let a=-1;let h=-1;const r=["/help","/h","/?","-help","-h","-?","--help","--h","--?"];const _=["--v","--version","-v","-version","/v","/version"];c.forEach((n,e)=>{const s=n.toLowerCase();if(r.indexOf(s)>-1){l=true;if(e<i){a=e+1}}else if(_.indexOf(s)>-1){h=e}});const f=h>-1;if(f&&!l){console.log(e);exitProcess()}let u=I18nFlag.all;switch(a===-1?"":c[a].toLowerCase()){case"en":case"en-us":case"en_us":u=I18nFlag.en_us;break;case"cn":case"zh-cn":case"zh_cn":u=I18nFlag.zh_cn;break;case"tw":case"zh-tw":case"zh_tw":u=I18nFlag.zh_tw;break;default:break}const g=(u&I18nFlag.en_us)===I18nFlag.en_us;const w=(u&I18nFlag.zh_cn)===I18nFlag.zh_cn;const z=(u&I18nFlag.zh_tw)===I18nFlag.zh_tw;const p={en_us:"",zh_cn:"",zh_tw:""};const d=c.length;const m=d<s;if(l||m){p.en_us+=`version: ${e}\n`;p.zh_cn+=`版本：${e}\n`;p.zh_tw+=`版本：${e}\n`;const b=typeof n==="string";if(!b){p.en_us+=`help:\n ${n.en_us}\n`;p.zh_cn+=`帮助：\n${n.zh_cn}\n`;p.zh_tw+=`幫助：\n${n.zh_tw}\n`}else{if(g){p.en_us+=`help:\n ${n}\n`}else if(w){p.zh_cn+=`help:\n ${n}\n`}else if(z){p.zh_tw+=`help:\n ${n}\n`}}if(m){p.en_us+=`[Error]${s} parameters are required, but only ${d} are passed in.`;p.zh_cn+=`【错误】需${s}个参数，但仅传入了${d}个。`;p.zh_tw+=`【錯誤】需${s}個參數，但僅傳入了${d}個。`}if(g){console.log(p.en_us)}if(w){console.log(p.zh_cn)}if(z){console.log(p.zh_tw)}exitProcess()}const F=new Date;if(isSyncFunc(t)){t(c)}else{await t(c)}if(!o){return}const $=new Date;const I=$.getTime()-F.getTime();const x=parseFloat((I/1e3).toFixed(4));if(g){console.log("Time consuming: ",I,"milliseconds, that is",x,"seconds")}if(w){console.log("耗时：",I,"毫秒，即",x,"秒")}if(z){console.log("耗時：",I,"毫秒，即",x,"秒")}}export function showHelpOrVersionOrCallback(n,e,s,t){done(n,e,s,t,false)}export function showHelpOrVersionOrCallbackAndShowUsedTime(n,e,s,t){done(n,e,s,t,true)}